<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tripzy</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Keep the default body styling */
        body {
            background-color: #f3f4f6;
            overflow: hidden;
        }

        /* Apply the background image only to the buttons container
        .buttons-container {
            background-image: url("https://media.gettyimages.com/id/1297349747/photo/hot-air-balloons-flying-over-the-botan-canyon-in-turkey.jpg?s=612x612&w=0&k=20&c=kt8-RRzCDunpxgKFMBBjZ6jSteetNhhSxHZFvHQ0hNU=");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            margin: -20px;
            padding: 0px;
            display: flex;
            position: relative;
            top: 0px;
            height: 95dvh;
            width: 100%;
        } */
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="bg-blue-600">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Left Section: Logo -->
                <div class="flex items-center">
                    <img src="/static/airplane.png" alt="Airplane Icon" class="h-8 mr-3">
                    <span class="text-white text-lg font-bold"><a href="/">Travel Expense Tracker</a></span>
                </div>
                <!-- Right Section: Menu -->
                <div class="hidden sm:flex space-x-6">
                    <a href="/"
                        class="text-white hover:text-yellow-300 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                    <a href="mailto:sanketsakariya2005@gmail.com,ponkiyarenish@gmail.com"
                        class="text-white hover:text-yellow-300 px-3 py-2 rounded-md text-sm font-medium">Contact Us</a>
                    <a href="/privacy"
                        class="text-white hover:text-yellow-300 px-3 py-2 rounded-md text-sm font-medium">Privacy
                        Policy</a>
                    <a href="{{ url_for('logout') }}"
                        class="text-white hover:text-yellow-300 px-3 py-2 rounded-md text-sm font-medium">Log Out</a>
                </div>
                <!-- Mobile Menu Button -->
                <div class="sm:hidden flex items-center">
                    <button id="mobile-menu-button"
                        class="p-2 rounded-md text-white hover:text-gray-200 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-yellow-300">
                        <span class="sr-only">Open main menu</span>
                        <!-- Menu Icon -->
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="sm:hidden hidden">
            <div class="px-4 pt-4 pb-4 space-y-2 bg-blue-700">
                <a href="/"
                    class="block text-white hover:text-yellow-300 px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="mailto:sanketsakariya2005@gmail.com,ponkiyarenish@gmail.com"
                    class="block text-white hover:text-yellow-300 px-3 py-2 rounded-md text-base font-medium">Contact
                    Us</a>
                <a href="/privacy"
                    class="block text-white hover:text-yellow-300 px-3 py-2 rounded-md text-base font-medium">Privacy
                    Policy</a>
                <a href="{{ url_for('logout') }}"
                    class="block text-white hover:text-yellow-300 px-3 py-2 rounded-md text-base font-medium">Log
                    Out</a>
            </div>
        </div>
    </nav>


    <main class="container mx-auto mt-5">
        <!-- Buttons Section with Background -->
        <div class="flex justify-center">
            <div class="buttons-container flex flex-col items-center space-y-4 p-10 pt-28">
                <!-- Create Trip Button -->
                <button id="createTripBtn"
                    class="w-64 bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
                    Create Trip
                </button>

                <!-- Previous Trips Button -->
                <button id="previousTripsBtn"
                    class="w-64 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400">
                    Previous Trips
                </button>
                {% if last_trip_id %}
                <!-- Show Latest Trip Detail Button -->
                <a href="{{ url_for('trip_details', trip_id=last_trip_id) }}">
                    <button
                        class="w-64 bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400">

                        Show Latest Trip Detail
                    </button>
                </a>

                <!-- Show Latest Expense Chart Button -->
                <a href="{{ url_for('expense', trip_id=last_trip_id) }}">
                    <button
                        class="w-64 bg-yellow-600 hover:bg-yellow-500 text-white px-6 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        Show Latest Expense Chart
                    </button>
                </a>
                {% endif %}
            </div>
        </div>

        <!-- Keep the other sections unchanged -->
        <div id="createTripTab" class="hidden">
            <h2 class="text-center font-bold text-2xl mb-4 text-gray-800">Create a New Trip</h2>
            <form method="post" id="tripForm" class="max-w-lg mx-auto bg-white p-6 rounded-lg shadow-md">
                <div class="mb-4">
                    <label for="tripName" class="block text-gray-700 font-medium mb-2">Trip Name</label>
                    <input type="text" id="tripName" name="tripName"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 focus:outline-none"
                        placeholder="Enter the trip name" required>
                </div>

                <div class="mb-4">
                    <label for="tripDestination" class="block text-gray-700 font-medium mb-2">Destination</label>
                    <input type="text" id="tripDestination" name="tripDestination"
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 focus:outline-none"
                        placeholder="Enter the destination" required>
                </div>

                <button type="submit"
                    class="w-full bg-green-500 text-white font-medium px-4 py-2 rounded-lg hover:bg-green-600 focus:ring-2 focus:ring-green-400 focus:outline-none">
                    Save Trip
                </button>
            </form>
        </div>

        <div id="previousTripsTab" class="hidden">
            <h2 class="text-center font-bold text-2xl mb-4">Previous Trips</h2>
            {% if trips %}
            <table id="tripsTable" class="table-auto w-full border-collapse border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2">SNO</th>
                        <th class="border border-gray-300 px-4 py-2">Trip Name</th>
                        <th class="border border-gray-300 px-4 py-2">Created At</th>
                        <th class="border border-gray-300 px-4 py-2">Full Details</th>
                    </tr>
                </thead>
                <tbody>
                    {% for trip in trips|reverse %}
                    <tr>
                        <td class="border border-gray-300 px-4 py-2 text center">{{loop.index}}</td>
                        <td class="border border-gray-300 px-4 py-2 text-center">{{ trip.trip_name }}</td>
                        <td class="border border-gray-300 px-4 py-2 text-center">{{ trip.created_at.strftime('%d-%m-%Y')
                            }}</td>
                            <td class="border border-gray-300 px-4 py-2 my-4 text-center">
                                <div class="flex justify-center gap-4">
                                    <!-- Button 1 -->
                                    <form action="{{ url_for('expense', trip_id=trip.trip_id) }}" method="GET" class="inline-block">
                                        <button type="submit" class="inline-block bg-transparent p-0 border-0 my-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                                                <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                                                <path fill-rule="evenodd" d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </form>
                            
                                    <!-- Button 2 -->
                                    <form action="{{ url_for('expense', trip_id=trip.trip_id) }}" method="GET" class="inline-block">
                                        <button type="submit" class="inline-block bg-rose-500 bg-transparent p-0 border-0 my-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                                                <path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z" />
                                                <path d="M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z" />
                                            </svg>
                                        </button>
                                    </form>
                            
                                    <!-- Button 3 -->
                                    <form action="{{ url_for('expense', trip_id=trip.trip_id) }}" method="GET" class="inline-block">
                                        <button type="submit" class="inline-block bg-rose-500 bg-transparent p-0 border-0 my-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                                                <path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </form>
                                </div>
                            </td>
                            

                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p id="noTripsMessage" class="text-gray-600 text-center">No trips found.</p>
            {% endif %}
        </div>
    </main>

    <script src="/static/script.js"></script>
</body>

</html>